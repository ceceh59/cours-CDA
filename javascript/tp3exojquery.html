<!DOCTYPE html>
<html>
<head>
	<title>Exercice3</title>
</head>
<body>
	<div id="div_principal">

	<button id="btn">Ajouter</button>
	
	
</div>
	<script
		  src="http://code.jquery.com/jquery-3.3.1.min.js"
		  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
		  crossorigin="anonymous"></script>

	<script>



		/*var div_enfant = $("<div");

		$('div_principal').html("jQuery 3");

		$("div_principal").on('click', function(div_enfant) {
						alert('clic');
		var enfants = $("#parent").contents();

		$('div_enfant').css('width','75px');
		$('div_enfant').css('height','75px');



		$("h1").each(function(index, element) {}

		$("div_enfant").on('mouseover', function() {
				$(this).css('background-color','green');
			});

			$("div_enfant").on('mouseout', function() {
				$(this).css('background-color','transparent');
			});*/

		
			function getRandomColor() {
				var letters = '0123456789ABCDEF';
				var color = '#';
				for (var i = 0; i < 6; i++) {
					color += letters[Math.floor(Math.random() * 16)];
				}
				return color;
			}

			$("button").on('click', function() {
				// créer le div et appliquer le style
				var divEnfant = $("<div>");
				divEnfant.css('width', "75px");
				divEnfant.css('height', '75px');
				divEnfant.css('display', 'inline-block');
				divEnfant.css('border', '1px solid ' + getRandomColor());

				// écouter les évenements
				divEnfant.on('mouseover', function() {
					$(this).css('background-color', 'green');
				});

				divEnfant.on('mouseout', function() {
					$(this).css('background-color', 'transparent');
				});

				$("#div_principal").append(divEnfant);

				// obtenir le nombre d'enfant div dans div_principal
				var nbDiv = $("#div_principal").children("div").length;
				// ou encore :
				// var nbDiv = $("#div_principal > div").length

				// insérer le chiffre dans l'élément
				divEnfant.text(nbDiv);

				// supprimer l'élément au clic
				divEnfant.on('click', function() {
					$(this).remove();

					// remettre à jour le compteur en modifiant le contenu
					// de chaque div enfant restant
					// la boucle each permet d'avoir la variable index représentant le numéro de l'itération (sans oublier qu'elle commence à 0)
					$("#div_principal > div").each(function(index, element) {
						$(this).text(index + 1);
					});
				});
			});
		</script>
	</body>
</html>